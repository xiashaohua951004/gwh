!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("undefined"!=typeof module&&module.exports?require("jquery"):jQuery)}(function(t){!function(e,n){function i(n){var i,s=n.lists,o=n.parent,a=n.cansee,r=n.cfg,c=r.seamless,l=r.scrollLen;i=n.pages=c?Math.ceil(s.length/l):n.pages;var d="scrollx"===r.effect,u=d?s.outerWidth(!0):s.outerHeight(!0),f=u*l,h=(a-l)*u,g=s.length%l,p=0===g?0:l-g,v=u*p,m=f*(i-1)-(r.allowBlank?0:v),b=0;!function(){if(c){var l,h,g,w=s.length;0!==p&&(g=d?"marginRight":"marginBottom",s.last().css(g,function(t,e){return parseInt(e)+v})),l=s.slice(-a+p).clone(!0),l.attr("data-clone",function(t){return w-(l.length-t)}),h=s.slice(0,a).clone(!0),h.attr("data-clone",function(t){return t}),s=o.prepend(l).append(h).children(),b=u*a,m=f*(i-1)+b}if("static"===o.css("position")&&o.css("position","relative"),d){var L=s.width();s.css({"float":"left",width:L}),o.css("width",u*s.length+(c?2*v:0)),1!==a||!r.doResize&&L!==t(e).width()||t(e).resize(function(){f=u=o.parent().width(),m=f*(i-1),c&&(b=u*a,m+=b),s.css("width",u),o.css("width",u*s.length),n.process(n.old,n.old,"must")})}}(),n.init(function(t,e,s){var g,p,v="must"===s?0:r.duration;if(c){var w=d?"left":"top";0===t&&e===i-1&&"next"===s?o.css(w,-h):t===i-1&&0===e&&"prev"===s&&o.css(w,-m-b+(a-l)*u)}g=t===i-1?m:f*t+b,p=d?{left:-g}:{top:-g},o.stop().animate(p,v,r.easing,function(){n.done()})})}function s(t){var e=t.lists,n=t.cfg,i=n.effect,s=n.easing,o=n.scrollLen,a=function(){t.done()};"fade"===i?("static"===t.parent.css("position")&&t.parent.css("position","relative"),"absolute"!==e.css("position")&&e.css({position:"absolute",left:0,top:0}),e.hide().eq(t.cur).show(),t.init(function(t,i,o){var r="must"===o?0:n.duration;e.eq(i).stop(!0,!0).css("z-index",1).fadeOut(r,s,a),e.eq(t).css("z-index",0).show()})):"fadeIn"===i?t.init(function(t,i,r){e.hide().slice(o*t,o*(t+1)).fadeIn("must"===r?0:n.duration,s,a)}):(n.duration=0,t.init(function(t){e.hide().slice(o*t,o*(t+1)).show(),a()}))}function o(e,i,s){"function"==typeof i&&(s=i,i=n),this.ele=t(e),this.cfg=t.extend({},o.config,i),"function"==typeof s&&(this.callback=s),this.valid=!0,this.predefine()}function a(t,e){for(var n="",i=t;e>i;i++)n+=',[data-clone="'+i+'"]';return n.substring(1)}t.fn.slide=function(e,n){return e=t.extend({easing:"swing",effect:"none"},e),this.each(function(t,a){var r=new o(a,e,n);r.valid&&(r.cfg.effect.indexOf("scroll")>=0?i(r):s(r))})},o.config={trigger:"mouseenter",tagClass:"current",btnClass:"disabled",duration:400,interval:5e3,cur:0,scrollLen:0},o.prototype={predefine:function(){var t,n,i,s,o=this,a=o.cfg,r=o.ele.find(a.lists||".j_slideLists"),c=r.parent(),l=r.children(),d=l.length,u=a.scrollLen;return n=Math.round(c.width()/l.outerWidth(!0))||1,i=Math.round(c.height()/l.outerHeight(!0))||1,t=n*i,u=a.scrollLen?u:t,s=Math.ceil((d-(t-u))/u),2>s||t>=d?(o.valid=!1,void o.init()):("ontouchstart"in e&&(a.trigger="click"),a.cur=a.cur>=s?s-1:a.cur||0,a.scrollLen=u,o.lists=l,o.parent=r,o.pages=s,o.cansee=t,void(o.old=a.cur))},init:function(e){var n,i=this,s=i.cfg,o=i.ele,a=o.find(s.tags||".j_slideTags"),r=o.find(s.posCur||".j_slideCur"),c=o.find(s.posPages||".j_slidePages"),l=o.find(s.btnPrev||".j_slidePrev"),d=o.find(s.btnNext||".j_slideNext");i.valid?(a.length&&(i.tags=a,i.bindTags()),l.length?(i.btnPrev=l,i.btnNext=d,i.bindBtns()):s.btnDisable=!1,r.length&&(i.posCur=r,c.html(i.pages)),s.auto&&i.bindAuto(),i.bindTouch(),i.process="function"==typeof e?e:t.noop,i.show(s.cur,"must"),a.add(r.parent()).add(l.parent()).show()):(a.add(r.parent()).add(l.parent()).remove(),s.lazyload&&(n=s.imgAttr||"data-slide-img",i.doLoadImg(t("["+n+"]"),n)))},rewriteTags:function(){var e=this,n=e.cfg,i=e.pages,s=e.tags;!n.keepTags&&function(){for(var t="",e=0,n="ul"===s[0].nodeName.toLowerCase()?"<li>":"<span>",o=n.replace("<","</");i>e;)t+=n+ ++e+o;s.html(t)}(),e.tags=s.children().removeClass(n.tagClass).each(function(e,n){t(n).data("i",e)})},bindTags:function(){var e,n,i,s=this,o=s.cfg,a=o.trigger,r="mouseenter"===a||"mouseover"===a;s.rewriteTags(),n=s.tags,r&&o.hoverDelay?(i=function(){var n=t(this);clearTimeout(e),e=setTimeout(function(){s.show(n.data("i"))},o.hoverDelay)},n.on("mouseleave",function(){clearTimeout(e)})):i=function(){s.show(t(this).data("i"))},n.on(a,i),!r&&n.has("a").on("click","a",function(e){t(this).parent().hasClass(o.tagClass)||e.preventDefault()})},bindBtns:function(){var e=this,n=e.old,i=e.cfg,s=i.btnClass,o=i.btnDisable,a=e.btnPrev,r=e.btnNext;a.on("click",function(){return(!o||!t(this).hasClass(s))&&e.prev(),!1}),r.on("click",function(){return(!o||!t(this).hasClass(s))&&e.next(),!1}),o&&(0===n?a.addClass(s):n===e.pages-1&&r.addClass(s))},bindAuto:function(){var t=this;t.ele.on({mouseenter:function(){t.pause()},mouseleave:function(){t.play()}})},prev:function(){var t=this.old-1;t=0>t?this.pages-1:t,this.show(t,"prev")},next:function(){var t=this.old+1;t=t>=this.pages?0:t,this.show(t,"next")},show:function(t,e){var i=this,s=i.old,o=i.cfg,a=o.btnClass,r=o.tagClass;s===t&&"must"!==e||i.isLocked||(o.beLock&&e!==n&&(i.isLocked=!0),o.btnDisable&&(i.btnPrev.toggleClass(a,0===t),i.btnNext.toggleClass(a,t===i.pages-1)),i.tags&&i.tags.eq(s).removeClass(r).end().eq(t).addClass(r),i.posCur&&i.posCur.html(t+1),o.lazyload&&i.loadImg(t),i.callback&&i.callback.call(i,t,s,e),i.process.call(i,t,s,e),i.old=t)},done:function(){var e=this,n=e.cfg;n.beLock&&(e.isLocked=!1),n.auto&&(e.tStartAuto=t.now(),e.auto())},lock:function(){this.isLocked=!0},unlock:function(){this.isLocked=!1,this.done()},pause:function(){this.isPaused=!0},play:function(){this.isPaused=!1,!this.isLocked&&this.auto(!0)},auto:function(e){var i=this,s=i.cfg.interval;clearTimeout(i.stopDoAuto),i.isPaused||(e&&i.tStartAuto!==n&&(s-=t.now()-i.tStartAuto),i.stopDoAuto=setTimeout(function(){!i.isPaused&&i.next()},s))},loadImg:function(e){var i=this,s=i.cfg;if(i.hasClone===n&&(i.hasClone=i.lists.first().prev().length>0,i.imgLoaded=" "),!(i.imgLoaded.indexOf(" "+e+" ")>=0)){i.imgLoaded+=e+" ";var o=s.imgAttr||"data-slide-img",r="["+o+"]",c=e*s.scrollLen,l=c+i.cansee,d=i.hasClone?i.parent.children(a(c,l)):n,u=i.lists.slice(c,l).add(d).find(r);i.doLoadImg(u,o),t.trim(i.imgLoaded).split(" ").length===i.pages&&(delete i.hasClone,delete i.imgLoaded,s.lazyload=!1)}},doLoadImg:function(t,e){t.each(function(t,n){var i=n.getAttribute(e);"img"===n.tagName.toLowerCase()?n.setAttribute("src",i):n.style.backgroundImage="url("+i+")",n.removeAttribute(e)})},bindTouch:function(){if("ontouchstart"in e){var t,n=this,i=n.ele,s=i[0],o=Math.floor(i.width()/4),a=0;o=o>80?80:o,s.addEventListener("touchstart",function(e){t=e.pageX}),s.addEventListener("touchmove",function(e){a=e.pageX-t,Math.abs(a)>20&&e.preventDefault()}),s.addEventListener("touchend",function(){Math.abs(a)>o&&(a>0?n.prev():n.next())})}}},e.Slider=o}(window)});